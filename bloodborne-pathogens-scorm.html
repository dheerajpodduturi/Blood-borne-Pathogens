<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bloodborne Pathogens Safety Training — SCORM 1.2</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;800;900&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
:root{
--bg-primary:#0d0d0d;--bg-secondary:#1a1a1a;--bg-card:#1e1e1e;--bg-card-hover:#252525;
--text-primary:#f5f5f5;--text-secondary:#b0b0b0;--text-muted:#777;
--accent-red:#e63946;--accent-red-dark:#b82e3a;--accent-amber:#f4a261;--accent-amber-dark:#e07b2a;
--accent-teal:#2ec4b6;--accent-green:#4caf50;
--border-color:#2a2a2a;--border-light:#333;
--font-display:'Playfair Display',Georgia,serif;--font-body:'Inter',system-ui,sans-serif;
--radius:12px;--radius-sm:8px;--radius-lg:20px;
--shadow:0 4px 24px rgba(0,0,0,0.4);--shadow-lg:0 8px 48px rgba(0,0,0,0.6);
--transition:0.3s cubic-bezier(0.4,0,0.2,1);
}
html{scroll-behavior:smooth;font-size:16px}
body{font-family:var(--font-body);background:var(--bg-primary);color:var(--text-primary);line-height:1.7;overflow-x:hidden}
h1,h2,h3,h4{font-family:var(--font-display);font-weight:800;line-height:1.2}
a{color:var(--accent-amber);text-decoration:none;transition:var(--transition)}
a:hover{color:var(--accent-red)}
.container{max-width:1100px;margin:0 auto;padding:0 24px}

/* TOP NAV */
.top-nav{position:fixed;top:0;left:0;right:0;z-index:1000;background:rgba(13,13,13,0.95);backdrop-filter:blur(12px);border-bottom:1px solid var(--border-color);padding:0 24px;height:60px;display:flex;align-items:center;justify-content:space-between}
.top-nav .logo{display:flex;align-items:center;gap:10px;font-family:var(--font-display);font-size:1.1rem;font-weight:700;color:var(--text-primary)}
.top-nav .logo svg{width:28px;height:28px;fill:var(--accent-red)}
.nav-right{display:flex;align-items:center;gap:12px}
.progress-badge{display:flex;align-items:center;gap:8px;background:var(--bg-card);border:1px solid var(--border-color);border-radius:20px;padding:6px 14px;font-size:0.8rem;font-weight:600;color:var(--accent-amber)}
.scorm-status{display:flex;align-items:center;gap:6px;font-size:0.75rem;font-weight:600;padding:6px 12px;border-radius:20px}
.scorm-status.connected{background:rgba(76,175,80,0.15);color:var(--accent-green);border:1px solid rgba(76,175,80,0.3)}
.scorm-status.standalone{background:rgba(244,162,97,0.15);color:var(--accent-amber);border:1px solid rgba(244,162,97,0.3)}
.scroll-progress{position:fixed;top:60px;left:0;height:3px;background:linear-gradient(90deg,var(--accent-red),var(--accent-amber));z-index:999;transition:width 0.15s linear;width:0%}

/* SIDEBAR NAV */
.sidebar-nav{position:fixed;right:24px;top:50%;transform:translateY(-50%);z-index:900;display:flex;flex-direction:column;gap:6px;align-items:flex-end}
.sidebar-nav a{display:flex;align-items:center;gap:8px;padding:6px 12px;border-radius:20px;font-size:0.7rem;font-weight:600;color:var(--text-muted);background:rgba(30,30,30,0.8);backdrop-filter:blur(8px);border:1px solid transparent;transition:var(--transition);text-transform:uppercase;letter-spacing:0.5px}
.sidebar-nav a .dot{width:8px;height:8px;border-radius:50%;background:var(--text-muted);transition:var(--transition);flex-shrink:0}
.sidebar-nav a:hover,.sidebar-nav a.active{color:var(--text-primary);border-color:var(--accent-red);background:rgba(230,57,70,0.1)}
.sidebar-nav a:hover .dot,.sidebar-nav a.active .dot{background:var(--accent-red);box-shadow:0 0 8px var(--accent-red)}
.sidebar-nav .label{display:none}
.sidebar-nav a:hover .label,.sidebar-nav a.active .label{display:inline}

/* HERO */
.hero{min-height:100vh;display:flex;align-items:center;justify-content:center;text-align:center;padding:100px 24px 60px;position:relative;overflow:hidden}
.hero::before{content:'';position:absolute;inset:0;background:radial-gradient(ellipse at 50% 30%,rgba(230,57,70,0.12) 0%,transparent 70%)}
.hero .badge{display:inline-flex;align-items:center;gap:6px;background:rgba(230,57,70,0.15);border:1px solid rgba(230,57,70,0.3);color:var(--accent-red);padding:8px 18px;border-radius:30px;font-size:0.8rem;font-weight:600;text-transform:uppercase;letter-spacing:1px;margin-bottom:24px}
.hero .badge svg{width:16px;height:16px;fill:var(--accent-red)}
.hero h1{font-size:clamp(2.5rem,6vw,4.5rem);margin-bottom:16px;background:linear-gradient(135deg,var(--text-primary) 0%,var(--accent-amber) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.hero p{font-size:1.15rem;color:var(--text-secondary);max-width:600px;margin:0 auto 36px}
.hero-btns{display:flex;gap:16px;justify-content:center;flex-wrap:wrap}
.btn{display:inline-flex;align-items:center;gap:8px;padding:14px 28px;border-radius:var(--radius);font-family:var(--font-body);font-size:0.95rem;font-weight:600;border:none;cursor:pointer;transition:var(--transition)}
.btn-primary{background:linear-gradient(135deg,var(--accent-red),var(--accent-red-dark));color:#fff;box-shadow:0 4px 20px rgba(230,57,70,0.3)}
.btn-primary:hover{transform:translateY(-2px);box-shadow:0 6px 28px rgba(230,57,70,0.4)}
.btn-outline{background:transparent;color:var(--text-primary);border:2px solid var(--border-light)}
.btn-outline:hover{border-color:var(--accent-amber);color:var(--accent-amber)}
.btn-success{background:linear-gradient(135deg,var(--accent-green),#388e3c);color:#fff}

section{padding:80px 0}
.section-label{display:inline-flex;align-items:center;gap:6px;color:var(--accent-red);font-size:0.8rem;font-weight:700;text-transform:uppercase;letter-spacing:2px;margin-bottom:12px}
.section-title{font-size:clamp(1.8rem,4vw,2.8rem);margin-bottom:16px}
.section-subtitle{color:var(--text-secondary);font-size:1.05rem;max-width:650px;margin-bottom:48px}

/* OVERVIEW CARDS */
.overview-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:20px}
.overview-card{background:var(--bg-card);border:1px solid var(--border-color);border-radius:var(--radius);padding:28px;transition:var(--transition);position:relative;overflow:hidden}
.overview-card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,var(--accent-red),var(--accent-amber));opacity:0;transition:var(--transition)}
.overview-card:hover{border-color:var(--accent-red);transform:translateY(-4px);box-shadow:var(--shadow)}
.overview-card:hover::before{opacity:1}
.overview-card .icon{width:48px;height:48px;border-radius:var(--radius-sm);background:rgba(230,57,70,0.1);display:flex;align-items:center;justify-content:center;margin-bottom:16px}
.overview-card .icon svg{width:24px;height:24px;fill:var(--accent-red)}
.overview-card h3{font-size:1.1rem;margin-bottom:8px;font-family:var(--font-body);font-weight:700}
.overview-card p{color:var(--text-secondary);font-size:0.9rem}

/* VIDEO */
.video-wrapper{position:relative;padding-bottom:56.25%;border-radius:var(--radius-lg);overflow:hidden;border:1px solid var(--border-color);box-shadow:var(--shadow-lg)}
.video-wrapper iframe{position:absolute;inset:0;width:100%;height:100%;border:0}
.video-meta{display:flex;gap:20px;margin-top:16px;flex-wrap:wrap}
.video-meta span{display:flex;align-items:center;gap:6px;color:var(--text-muted);font-size:0.85rem}
.video-meta svg{width:16px;height:16px;fill:var(--text-muted)}

/* MODULES TIMELINE */
.timeline{position:relative;padding-left:40px}
.timeline::before{content:'';position:absolute;left:15px;top:0;bottom:0;width:2px;background:var(--border-color)}
.timeline-item{position:relative;margin-bottom:32px}
.timeline-item .dot{position:absolute;left:-40px;top:4px;width:32px;height:32px;border-radius:50%;background:var(--bg-card);border:2px solid var(--border-color);display:flex;align-items:center;justify-content:center;font-size:0.75rem;font-weight:700;color:var(--text-muted);transition:var(--transition);z-index:1}
.timeline-item.active .dot{border-color:var(--accent-red);color:var(--accent-red);background:rgba(230,57,70,0.1)}
.timeline-item.completed .dot{border-color:var(--accent-green);background:var(--accent-green);color:#fff}
.module-card{background:var(--bg-card);border:1px solid var(--border-color);border-radius:var(--radius);padding:24px;transition:var(--transition)}
.module-card:hover{border-color:var(--accent-amber);box-shadow:var(--shadow)}
.module-card h3{font-size:1.15rem;margin-bottom:6px;font-family:var(--font-body);font-weight:700}
.module-card p{color:var(--text-secondary);font-size:0.9rem;margin-bottom:12px}
.module-tag{display:inline-block;padding:4px 10px;border-radius:12px;font-size:0.7rem;font-weight:600;text-transform:uppercase}
.module-tag.core{background:rgba(230,57,70,0.15);color:var(--accent-red)}
.module-tag.practical{background:rgba(244,162,97,0.15);color:var(--accent-amber)}
.module-tag.regulation{background:rgba(46,196,182,0.15);color:var(--accent-teal)}

/* QUIZ */
.quiz-container{max-width:700px}
.quiz-question{background:var(--bg-card);border:1px solid var(--border-color);border-radius:var(--radius);padding:28px;margin-bottom:24px}
.quiz-question h4{font-size:1rem;font-family:var(--font-body);font-weight:700;margin-bottom:16px;display:flex;align-items:center;gap:8px}
.quiz-question h4 .q-num{background:var(--accent-red);color:#fff;width:28px;height:28px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:0.75rem;flex-shrink:0}
.quiz-options{display:flex;flex-direction:column;gap:10px}
.quiz-option{display:flex;align-items:center;gap:12px;padding:12px 16px;border:1px solid var(--border-color);border-radius:var(--radius-sm);cursor:pointer;transition:var(--transition);font-size:0.9rem}
.quiz-option:hover{border-color:var(--accent-amber);background:rgba(244,162,97,0.05)}
.quiz-option.selected{border-color:var(--accent-amber);background:rgba(244,162,97,0.1)}
.quiz-option.correct{border-color:var(--accent-green);background:rgba(76,175,80,0.1);color:var(--accent-green)}
.quiz-option.incorrect{border-color:var(--accent-red);background:rgba(230,57,70,0.1);color:var(--accent-red)}
.quiz-option .radio{width:20px;height:20px;border-radius:50%;border:2px solid var(--border-light);flex-shrink:0;display:flex;align-items:center;justify-content:center;transition:var(--transition)}
.quiz-option.selected .radio{border-color:var(--accent-amber)}
.quiz-option.selected .radio::after{content:'';width:10px;height:10px;border-radius:50%;background:var(--accent-amber)}
.quiz-option.correct .radio{border-color:var(--accent-green)}
.quiz-option.correct .radio::after{content:'';width:10px;height:10px;border-radius:50%;background:var(--accent-green)}
.quiz-feedback{margin-top:12px;padding:12px 16px;border-radius:var(--radius-sm);font-size:0.85rem;font-weight:500;display:none}
.quiz-feedback.show{display:block}
.quiz-feedback.correct{background:rgba(76,175,80,0.1);border:1px solid rgba(76,175,80,0.3);color:var(--accent-green)}
.quiz-feedback.incorrect{background:rgba(230,57,70,0.1);border:1px solid rgba(230,57,70,0.3);color:var(--accent-red)}
.quiz-score-box{background:var(--bg-card);border:1px solid var(--border-color);border-radius:var(--radius);padding:24px;text-align:center;margin-top:24px;display:none}
.quiz-score-box.show{display:block}
.quiz-score-box .score{font-size:2.5rem;font-family:var(--font-display);font-weight:900;color:var(--accent-amber)}

/* ACCORDION */
.accordion{display:flex;flex-direction:column;gap:8px}
.accordion-item{background:var(--bg-card);border:1px solid var(--border-color);border-radius:var(--radius);overflow:hidden}
.accordion-header{padding:18px 24px;cursor:pointer;display:flex;justify-content:space-between;align-items:center;font-weight:600;font-size:0.95rem;transition:var(--transition)}
.accordion-header:hover{background:var(--bg-card-hover)}
.accordion-header svg{width:20px;height:20px;fill:var(--text-muted);transition:transform 0.3s ease}
.accordion-item.open .accordion-header svg{transform:rotate(180deg)}
.accordion-body{max-height:0;overflow:hidden;transition:max-height 0.4s ease}
.accordion-body-inner{padding:0 24px 20px}
.accordion-body-inner p{color:var(--text-secondary);font-size:0.9rem;margin-bottom:8px}
.accordion-body-inner .detail-row{display:flex;gap:12px;align-items:flex-start;padding:8px 0;border-bottom:1px solid var(--border-color)}
.accordion-body-inner .detail-row:last-child{border-bottom:none}
.accordion-body-inner .detail-label{font-weight:600;color:var(--accent-amber);min-width:160px;font-size:0.85rem}
.accordion-body-inner .detail-value{color:var(--text-secondary);font-size:0.85rem}

/* STATS */
.stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:20px}
.stat-card{background:var(--bg-card);border:1px solid var(--border-color);border-radius:var(--radius);padding:28px;text-align:center;transition:var(--transition)}
.stat-card:hover{transform:translateY(-4px);box-shadow:var(--shadow);border-color:var(--accent-red)}
.stat-number{font-size:2.5rem;font-family:var(--font-display);font-weight:900;color:var(--accent-amber);margin-bottom:4px}
.stat-label{color:var(--text-secondary);font-size:0.85rem;font-weight:500}

/* RESOURCES */
.resources-list{display:flex;flex-direction:column;gap:12px}
.resource-item{display:flex;align-items:center;gap:16px;padding:16px 20px;background:var(--bg-card);border:1px solid var(--border-color);border-radius:var(--radius);transition:var(--transition)}
.resource-item:hover{border-color:var(--accent-amber);transform:translateX(4px)}
.resource-item .r-icon{width:44px;height:44px;border-radius:var(--radius-sm);background:rgba(230,57,70,0.1);display:flex;align-items:center;justify-content:center;flex-shrink:0}
.resource-item .r-icon svg{width:20px;height:20px;fill:var(--accent-red)}
.resource-item .r-info h4{font-size:0.95rem;font-family:var(--font-body);font-weight:600;margin-bottom:2px}
.resource-item .r-info p{color:var(--text-muted);font-size:0.8rem}

/* CERTIFICATE */
.cert-card{background:var(--bg-card);border:2px solid var(--accent-amber);border-radius:var(--radius-lg);padding:48px;text-align:center;position:relative;overflow:hidden;max-width:650px;margin:0 auto}
.cert-card::before{content:'';position:absolute;inset:8px;border:1px solid rgba(244,162,97,0.2);border-radius:calc(var(--radius-lg) - 4px);pointer-events:none}
.cert-card h3{font-size:1.8rem;margin-bottom:8px}
.cert-card .cert-sub{color:var(--text-secondary);margin-bottom:28px}
.cert-form{display:flex;flex-direction:column;gap:16px;align-items:center}
.cert-form input{background:var(--bg-primary);border:1px solid var(--border-color);border-radius:var(--radius-sm);padding:12px 20px;font-size:1rem;color:var(--text-primary);font-family:var(--font-body);width:100%;max-width:380px;text-align:center;transition:var(--transition)}
.cert-form input:focus{outline:none;border-color:var(--accent-amber);box-shadow:0 0 0 3px rgba(244,162,97,0.15)}

/* MODULE COMPLETE */
.module-complete{background:var(--bg-card);border:1px solid var(--border-color);border-radius:var(--radius-lg);padding:48px;text-align:center;max-width:500px;margin:40px auto 0;display:none}
.module-complete.show{display:block}
.module-complete .xp-badge{display:inline-flex;align-items:center;gap:6px;background:linear-gradient(135deg,var(--accent-amber),var(--accent-amber-dark));color:#000;padding:8px 18px;border-radius:20px;font-size:0.85rem;font-weight:700;margin-bottom:16px}
.module-complete h3{font-size:1.5rem;margin-bottom:8px}
.module-complete p{color:var(--text-secondary);margin-bottom:20px}
.module-complete .progress-mini{width:100%;height:8px;background:var(--bg-primary);border-radius:4px;overflow:hidden;margin-bottom:8px}
.module-complete .progress-mini-fill{height:100%;background:linear-gradient(90deg,var(--accent-red),var(--accent-amber));border-radius:4px;transition:width 1s ease}
.module-complete .progress-text{font-size:0.8rem;color:var(--text-muted)}

/* SCORM COMPLETE SECTION */
.scorm-complete-section{background:var(--bg-card);border:2px solid var(--accent-green);border-radius:var(--radius-lg);padding:36px;text-align:center;max-width:600px;margin:40px auto}
.scorm-complete-section h3{color:var(--accent-green);margin-bottom:12px}
.scorm-complete-section p{color:var(--text-secondary);margin-bottom:20px;font-size:0.9rem}

footer{border-top:1px solid var(--border-color);padding:40px 0;text-align:center;color:var(--text-muted);font-size:0.8rem}
footer p{margin-bottom:8px}

.reveal{opacity:0;transform:translateY(30px);transition:opacity 0.7s ease,transform 0.7s ease}
.reveal.visible{opacity:1;transform:translateY(0)}
.reveal-delay-1{transition-delay:0.1s}.reveal-delay-2{transition-delay:0.2s}.reveal-delay-3{transition-delay:0.3s}

@media(max-width:768px){
  .sidebar-nav{display:none}
  section{padding:60px 0}
  .hero{min-height:80vh;padding:80px 16px 40px}
  .cert-card{padding:28px}
  .timeline{padding-left:32px}
  .timeline-item .dot{left:-32px;width:26px;height:26px;font-size:0.65rem}
  .scorm-status .status-text{display:none}
}
@media(max-width:480px){
  .hero-btns{flex-direction:column;align-items:center}
  .overview-grid{grid-template-columns:1fr}
  .stats-grid{grid-template-columns:1fr 1fr}
}
</style>
</head>
<body>

<!-- TOP NAV -->
<nav class="top-nav">
  <div class="logo">
    <svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/></svg>
    Bloodborne Pathogens Safety
  </div>
  <div class="nav-right">
    <div class="scorm-status" id="scormStatusBadge"><span class="status-text">Detecting LMS...</span></div>
    <div class="progress-badge">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
      <span class="pct" id="navPct">0%</span>
    </div>
  </div>
</nav>
<div class="scroll-progress" id="scrollProgress"></div>

<!-- SIDEBAR NAV -->
<nav class="sidebar-nav" id="sidebarNav">
  <a href="#hero" data-section="hero"><span class="label">Intro</span><span class="dot"></span></a>
  <a href="#video" data-section="video"><span class="label">Video</span><span class="dot"></span></a>
  <a href="#quiz" data-section="quiz"><span class="label">Knowledge Check</span><span class="dot"></span></a>
  <a href="#modules" data-section="modules"><span class="label">Reading</span><span class="dot"></span></a>
  <a href="#reference" data-section="reference"><span class="label">Reference</span><span class="dot"></span></a>
  <a href="#stats" data-section="stats"><span class="label">Activity</span><span class="dot"></span></a>
  <a href="#certificate" data-section="certificate"><span class="label">Complete</span><span class="dot"></span></a>
</nav>

<!-- HERO -->
<section class="hero" id="hero">
  <div>
    <div class="badge">
      <svg viewBox="0 0 24 24"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"/></svg>
      OSHA 29 CFR 1910.1030 Compliant
    </div>
    <h1>Bloodborne Pathogens<br>Safety Training</h1>
    <p>Comprehensive SCORM 1.2 compatible training to protect healthcare workers and first responders from bloodborne pathogen exposure.</p>
    <div class="hero-btns">
      <a href="#overview" class="btn btn-primary">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
        Start Training
      </a>
      <a href="#modules" class="btn btn-outline">View Modules</a>
    </div>
  </div>
</section>

<!-- COURSE OVERVIEW -->
<section id="overview">
  <div class="container">
    <span class="section-label reveal">Course Overview</span>
    <h2 class="section-title reveal">What You'll Learn</h2>
    <p class="section-subtitle reveal">This course covers essential knowledge about bloodborne pathogens, exposure prevention, and post-exposure procedures.</p>
    <div class="overview-grid">
      <div class="overview-card reveal">
        <div class="icon"><svg viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 14c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6z"/></svg></div>
        <h3>What Are BBPs?</h3>
        <p>Understand bloodborne pathogens — microorganisms in human blood that can cause disease.</p>
      </div>
      <div class="overview-card reveal reveal-delay-1">
        <div class="icon"><svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg></div>
        <h3>Why Training Matters</h3>
        <p>Learn why proper BBP training saves lives and is legally required under OSHA standards.</p>
      </div>
      <div class="overview-card reveal reveal-delay-2">
        <div class="icon"><svg viewBox="0 0 24 24"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg></div>
        <h3>Who Needs This</h3>
        <p>Healthcare workers, first responders, lab personnel, and anyone with occupational exposure risk.</p>
      </div>
      <div class="overview-card reveal reveal-delay-3">
        <div class="icon"><svg viewBox="0 0 24 24"><path d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm-1 7V3.5L18.5 9H13z"/></svg></div>
        <h3>OSHA Standard</h3>
        <p>Reference the OSHA Bloodborne Pathogens Standard 29 CFR 1910.1030 requirements.</p>
      </div>
    </div>
  </div>
</section>

<!-- VIDEO -->
<section id="video" style="background:var(--bg-secondary)">
  <div class="container">
    <span class="section-label reveal">Video Training</span>
    <h2 class="section-title reveal">Bloodborne Pathogens Overview</h2>
    <p class="section-subtitle reveal">Watch this essential training video covering the fundamentals of bloodborne pathogen safety.</p>
    <div class="video-wrapper reveal">
      <iframe src="https://www.youtube.com/embed/MpSbGFpEEHE" title="Bloodborne Pathogens Training" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen loading="lazy"></iframe>
    </div>
    <div class="video-meta reveal">
      <span><svg viewBox="0 0 24 24"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"/></svg> ~15 min</span>
      <span><svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg> Required viewing</span>
    </div>
  </div>
</section>

<!-- MODULES -->
<section id="modules">
  <div class="container">
    <span class="section-label reveal">Course Modules</span>
    <h2 class="section-title reveal">6 Training Modules</h2>
    <p class="section-subtitle reveal">Work through each module sequentially to build a comprehensive understanding of bloodborne pathogen safety.</p>
    <div class="timeline">
      <div class="timeline-item completed reveal"><div class="dot">&#10003;</div><div class="module-card"><span class="module-tag core">Core</span><h3>Module 1: Introduction to Bloodborne Pathogens</h3><p>Define bloodborne pathogens, understand their significance in workplace safety, and learn which industries are most at risk.</p></div></div>
      <div class="timeline-item active reveal"><div class="dot">2</div><div class="module-card"><span class="module-tag core">Core</span><h3>Module 2: Types of Bloodborne Pathogens</h3><p>Explore HBV, HCV, HIV, and other bloodborne pathogens. Learn about transmission routes, incubation periods, and survivability.</p></div></div>
      <div class="timeline-item reveal"><div class="dot">3</div><div class="module-card"><span class="module-tag core">Core</span><h3>Module 3: Transmission & Exposure Routes</h3><p>Understand how bloodborne pathogens are transmitted and identify exposure incidents.</p></div></div>
      <div class="timeline-item reveal"><div class="dot">4</div><div class="module-card"><span class="module-tag practical">Practical</span><h3>Module 4: Personal Protective Equipment (PPE)</h3><p>Learn proper selection, use, removal, and disposal of PPE including gloves, gowns, masks, and eye protection.</p></div></div>
      <div class="timeline-item reveal"><div class="dot">5</div><div class="module-card"><span class="module-tag regulation">Regulation</span><h3>Module 5: Exposure Control Plan</h3><p>Understand the required elements of an Exposure Control Plan, engineering controls, and universal precautions.</p></div></div>
      <div class="timeline-item reveal"><div class="dot">6</div><div class="module-card"><span class="module-tag practical">Practical</span><h3>Module 6: Post-Exposure Procedures</h3><p>Learn the steps after an exposure incident, reporting requirements, medical evaluation, and documentation.</p></div></div>
    </div>
  </div>
</section>

<!-- QUIZ -->
<section id="quiz" style="background:var(--bg-secondary)">
  <div class="container">
    <span class="section-label reveal">Knowledge Check</span>
    <h2 class="section-title reveal">Test Your Knowledge</h2>
    <p class="section-subtitle reveal">Answer the following questions to test your understanding. You need 70% or higher to pass.</p>
    <div class="quiz-container reveal">
      <div class="quiz-question" data-correct="1"><h4><span class="q-num">1</span> Which of the following is considered a bloodborne pathogen?</h4><div class="quiz-options"><div class="quiz-option" data-index="0"><span class="radio"></span>Influenza virus</div><div class="quiz-option" data-index="1"><span class="radio"></span>Hepatitis B virus (HBV)</div><div class="quiz-option" data-index="2"><span class="radio"></span>Tuberculosis bacteria</div><div class="quiz-option" data-index="3"><span class="radio"></span>Common cold virus</div></div><div class="quiz-feedback"></div></div>
      <div class="quiz-question" data-correct="2"><h4><span class="q-num">2</span> What is the OSHA standard that covers Bloodborne Pathogens?</h4><div class="quiz-options"><div class="quiz-option" data-index="0"><span class="radio"></span>29 CFR 1910.134</div><div class="quiz-option" data-index="1"><span class="radio"></span>29 CFR 1926.501</div><div class="quiz-option" data-index="2"><span class="radio"></span>29 CFR 1910.1030</div><div class="quiz-option" data-index="3"><span class="radio"></span>29 CFR 1910.147</div></div><div class="quiz-feedback"></div></div>
      <div class="quiz-question" data-correct="0"><h4><span class="q-num">3</span> What is the first step after a needlestick injury?</h4><div class="quiz-options"><div class="quiz-option" data-index="0"><span class="radio"></span>Wash the area with soap and water immediately</div><div class="quiz-option" data-index="1"><span class="radio"></span>Apply a bandage and continue working</div><div class="quiz-option" data-index="2"><span class="radio"></span>Wait until end of shift to report it</div><div class="quiz-option" data-index="3"><span class="radio"></span>Squeeze the wound to force out blood</div></div><div class="quiz-feedback"></div></div>
      <div class="quiz-question" data-correct="1"><h4><span class="q-num">4</span> Which PPE is MOST commonly used against BBP exposure?</h4><div class="quiz-options"><div class="quiz-option" data-index="0"><span class="radio"></span>Safety goggles</div><div class="quiz-option" data-index="1"><span class="radio"></span>Disposable gloves</div><div class="quiz-option" data-index="2"><span class="radio"></span>Face shields</div><div class="quiz-option" data-index="3"><span class="radio"></span>Surgical gowns</div></div><div class="quiz-feedback"></div></div>
      <div class="quiz-question" data-correct="2"><h4><span class="q-num">5</span> Which bloodborne pathogen has a vaccine available?</h4><div class="quiz-options"><div class="quiz-option" data-index="0"><span class="radio"></span>HIV</div><div class="quiz-option" data-index="1"><span class="radio"></span>Hepatitis C</div><div class="quiz-option" data-index="2"><span class="radio"></span>Hepatitis B</div><div class="quiz-option" data-index="3"><span class="radio"></span>All of the above</div></div><div class="quiz-feedback"></div></div>
      <div style="text-align:center;margin-top:24px"><button class="btn btn-primary" id="submitQuiz" onclick="submitQuiz()">Submit Answers</button></div>
      <div class="quiz-score-box" id="quizScore"></div>
    </div>
  </div>
</section>

<!-- REFERENCE / ACCORDION -->
<section id="reference">
  <div class="container">
    <span class="section-label reveal">Reference Material</span>
    <h2 class="section-title reveal">Key Pathogens at a Glance</h2>
    <p class="section-subtitle reveal">Expand each section to learn about the major bloodborne pathogens.</p>
    <div class="accordion reveal">
      <div class="accordion-item open"><div class="accordion-header" onclick="toggleAccordion(this)">Hepatitis B Virus (HBV)<svg viewBox="0 0 24 24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6z"/></svg></div><div class="accordion-body" style="max-height:400px"><div class="accordion-body-inner"><div class="detail-row"><span class="detail-label">Transmission Routes</span><span class="detail-value">Blood, semen, vaginal fluids through percutaneous or mucosal exposure</span></div><div class="detail-row"><span class="detail-label">Survivability</span><span class="detail-value">Can survive outside the body for at least 7 days</span></div><div class="detail-row"><span class="detail-label">Vaccine</span><span class="detail-value">Yes — highly effective 3-dose vaccine series. OSHA requires employers to offer free HBV vaccination.</span></div><div class="detail-row"><span class="detail-label">Incubation</span><span class="detail-value">45 to 160 days (average 120 days)</span></div></div></div></div>
      <div class="accordion-item"><div class="accordion-header" onclick="toggleAccordion(this)">Hepatitis C Virus (HCV)<svg viewBox="0 0 24 24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6z"/></svg></div><div class="accordion-body"><div class="accordion-body-inner"><div class="detail-row"><span class="detail-label">Transmission Routes</span><span class="detail-value">Primarily through percutaneous exposure to infected blood</span></div><div class="detail-row"><span class="detail-label">Survivability</span><span class="detail-value">Can survive on surfaces at room temperature for up to 3 weeks</span></div><div class="detail-row"><span class="detail-label">Vaccine</span><span class="detail-value">No vaccine available. Antiviral treatments can cure over 95% of cases.</span></div><div class="detail-row"><span class="detail-label">Chronic Rate</span><span class="detail-value">75-85% of infected persons develop chronic infection</span></div></div></div></div>
      <div class="accordion-item"><div class="accordion-header" onclick="toggleAccordion(this)">Human Immunodeficiency Virus (HIV)<svg viewBox="0 0 24 24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6z"/></svg></div><div class="accordion-body"><div class="accordion-body-inner"><div class="detail-row"><span class="detail-label">Transmission Routes</span><span class="detail-value">Blood, semen, vaginal fluids, breast milk through percutaneous or mucosal exposure</span></div><div class="detail-row"><span class="detail-label">Survivability</span><span class="detail-value">Fragile virus — does not survive well outside the body</span></div><div class="detail-row"><span class="detail-label">Vaccine</span><span class="detail-value">No vaccine. Post-exposure prophylaxis (PEP) can reduce risk within 72 hours.</span></div><div class="detail-row"><span class="detail-label">Occupational Risk</span><span class="detail-value">~0.3% risk from a single needlestick with HIV-infected blood</span></div></div></div></div>
      <div class="accordion-item"><div class="accordion-header" onclick="toggleAccordion(this)">Other Bloodborne Pathogens<svg viewBox="0 0 24 24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6z"/></svg></div><div class="accordion-body"><div class="accordion-body-inner"><p>Other pathogens transmitted through blood include:</p><div class="detail-row"><span class="detail-label">Hepatitis D (HDV)</span><span class="detail-value">Occurs only with HBV co-infection. HBV vaccine prevents HDV.</span></div><div class="detail-row"><span class="detail-label">Syphilis</span><span class="detail-value">Caused by Treponema pallidum, transmissible via blood contact.</span></div><div class="detail-row"><span class="detail-label">Malaria</span><span class="detail-value">Plasmodium parasites, transmissible through blood transfusion or needlestick.</span></div></div></div></div>
    </div>
  </div>
</section>

<!-- STATISTICS -->
<section id="stats" style="background:var(--bg-secondary)">
  <div class="container">
    <span class="section-label reveal">Key Statistics</span>
    <h2 class="section-title reveal">BBP Exposure by the Numbers</h2>
    <p class="section-subtitle reveal">Understanding the scope of occupational bloodborne pathogen exposure.</p>
    <div class="stats-grid">
      <div class="stat-card reveal"><div class="stat-number" data-target="5600000">0</div><div class="stat-label">Healthcare workers at risk</div></div>
      <div class="stat-card reveal reveal-delay-1"><div class="stat-number" data-target="385000">0</div><div class="stat-label">Needlestick injuries per year in U.S.</div></div>
      <div class="stat-card reveal reveal-delay-2"><div class="stat-number" data-target="1000">0</div><div class="stat-label">Workers infected with serious BBP annually</div></div>
      <div class="stat-card reveal reveal-delay-3"><div class="stat-number" data-target="95">0</div><div class="stat-label">Percent of infections preventable</div></div>
    </div>
  </div>
</section>

<!-- RESOURCES -->
<section id="resources">
  <div class="container">
    <span class="section-label reveal">Resources</span>
    <h2 class="section-title reveal">Additional Resources</h2>
    <p class="section-subtitle reveal">Access OSHA guidelines and additional training resources.</p>
    <div class="resources-list">
      <a href="https://www.osha.gov/bloodborne-pathogens" target="_blank" class="resource-item reveal"><div class="r-icon"><svg viewBox="0 0 24 24"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"/></svg></div><div class="r-info"><h4>OSHA Bloodborne Pathogens Page</h4><p>Official standards, directives, and compliance guidance</p></div></a>
      <a href="https://www.osha.gov/laws-regs/regulations/standardnumber/1910/1910.1030" target="_blank" class="resource-item reveal reveal-delay-1"><div class="r-icon"><svg viewBox="0 0 24 24"><path d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm-1 7V3.5L18.5 9H13z"/></svg></div><div class="r-info"><h4>29 CFR 1910.1030 Full Text</h4><p>Complete text of the OSHA Bloodborne Pathogens Standard</p></div></a>
      <a href="https://www.cdc.gov/niosh/topics/bbp/" target="_blank" class="resource-item reveal reveal-delay-2"><div class="r-icon"><svg viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 14c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6z"/></svg></div><div class="r-info"><h4>CDC/NIOSH BBP Resources</h4><p>Prevention strategies, research, and educational materials</p></div></a>
    </div>
  </div>
</section>

<!-- CERTIFICATE & COMPLETION -->
<section id="certificate">
  <div class="container">
    <span class="section-label reveal">Course Completion</span>
    <h2 class="section-title reveal">Generate Your Certificate</h2>
    <p class="section-subtitle reveal">Complete the quiz with 70% or higher, then enter your name to generate your certificate.</p>
    <div class="cert-card reveal">
      <svg width="48" height="48" viewBox="0 0 24 24" fill="var(--accent-amber)" style="margin:0 auto 16px"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
      <h3>Certificate of Completion</h3>
      <p class="cert-sub">Bloodborne Pathogens Safety Training</p>
      <div class="cert-form">
        <input type="text" id="certName" placeholder="Enter your full name">
        <input type="text" id="certDate" value="" readonly style="color:var(--text-muted)">
        <button class="btn btn-primary" onclick="generateCert()">Generate Certificate</button>
        <div id="certMessage" style="margin-top:12px;font-size:0.9rem;display:none"></div>
      </div>
    </div>

    <!-- SCORM Mark Complete -->
    <div class="scorm-complete-section reveal" style="margin-top:40px">
      <h3>Mark Course Complete</h3>
      <p>Once you have passed the quiz and reviewed all materials, click below to submit your completion to the LMS.</p>
      <button class="btn btn-success" id="markCompleteBtn" onclick="markCourseComplete()">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>
        Mark Complete
      </button>
      <div id="scormMessage" style="margin-top:12px;font-size:0.9rem;display:none"></div>
    </div>

    <!-- Module Complete Card -->
    <div class="module-complete" id="moduleComplete">
      <div class="xp-badge">&#9733; +150 XP</div>
      <h3>Course Complete!</h3>
      <p>Congratulations on completing the Bloodborne Pathogens Safety Training.</p>
      <div class="progress-mini"><div class="progress-mini-fill" style="width:100%"></div></div>
      <div class="progress-text">6 of 6 modules completed &bull; 100% of course complete</div>
    </div>
  </div>
</section>

<footer>
  <div class="container">
    <p><strong>Disclaimer:</strong> This training is for educational purposes and meets OSHA 29 CFR 1910.1030 annual retraining requirements. It does not replace site-specific training.</p>
    <p>&copy; 2026 Bloodborne Pathogens Safety Training. SCORM 1.2 Compatible.</p>
  </div>
</footer>

<script>
// ============ SCORM 1.2 API WRAPPER ============
var SCORM = (function(){
  var api = null;
  var connected = false;
  var startTime = new Date();

  function findAPI(win){
    var attempts = 0;
    while(win && !win.API && attempts < 10){
      if(win.parent && win.parent !== win) win = win.parent;
      else if(win.opener) win = win.opener;
      else break;
      attempts++;
    }
    return win && win.API ? win.API : null;
  }

  function init(){
    api = findAPI(window);
    if(!api && window.opener) api = findAPI(window.opener);
    if(api){
      var result = api.LMSInitialize('');
      connected = (result === 'true' || result === true);
      if(connected){
        api.LMSSetValue('cmi.core.lesson_status','incomplete');
        api.LMSCommit('');
        console.log('[SCORM] Connected to LMS');
      }
    }
    if(!connected){
      console.log('[SCORM] Running in standalone mode (no LMS detected)');
    }
    updateStatusBadge();
  }

  function updateStatusBadge(){
    var badge = document.getElementById('scormStatusBadge');
    if(connected){
      badge.className = 'scorm-status connected';
      badge.innerHTML = '<span class="status-text">LMS Connected</span>';
    } else {
      badge.className = 'scorm-status standalone';
      badge.innerHTML = '<span class="status-text">Standalone Mode</span>';
    }
  }

  function setValue(key, val){
    if(connected && api){
      api.LMSSetValue(key, String(val));
      console.log('[SCORM] Set ' + key + ' = ' + val);
    } else {
      console.log('[SCORM-Standalone] Would set ' + key + ' = ' + val);
    }
  }

  function commit(){
    if(connected && api){
      api.LMSCommit('');
      console.log('[SCORM] Data committed');
    } else {
      console.log('[SCORM-Standalone] Commit (no LMS)');
    }
  }

  function complete(scoreRaw, scoreMax){
    var pct = Math.round((scoreRaw / scoreMax) * 100);
    var passed = pct >= 70;

    setValue('cmi.core.score.raw', scoreRaw);
    setValue('cmi.core.score.max', scoreMax);
    setValue('cmi.core.score.min', 0);
    setValue('cmi.core.lesson_status', passed ? 'passed' : 'failed');

    // Calculate session time
    var now = new Date();
    var elapsed = now - startTime;
    var hrs = Math.floor(elapsed / 3600000);
    var mins = Math.floor((elapsed % 3600000) / 60000);
    var secs = Math.floor((elapsed % 60000) / 1000);
    var timeStr = pad(hrs) + ':' + pad(mins) + ':' + pad(secs);
    setValue('cmi.core.session_time', timeStr);

    commit();
    return passed;
  }

  function finish(){
    if(connected && api){
      api.LMSFinish('');
      console.log('[SCORM] Session finished');
    }
  }

  function pad(n){ return n < 10 ? '0' + n : String(n); }

  function isConnected(){ return connected; }

  // Initialize on load
  init();

  // Finish on unload
  window.addEventListener('beforeunload', function(){ finish(); });

  return { setValue:setValue, commit:commit, complete:complete, finish:finish, isConnected:isConnected };
})();

// ============ SCROLL PROGRESS ============
function updateScrollProgress(){
  var s = document.documentElement.scrollTop || document.body.scrollTop;
  var h = document.documentElement.scrollHeight - document.documentElement.clientHeight;
  var pct = Math.round((s / h) * 100);
  document.getElementById('scrollProgress').style.width = pct + '%';
  document.getElementById('navPct').textContent = pct + '%';
}
window.addEventListener('scroll', updateScrollProgress);

// ============ SIDEBAR ACTIVE STATE ============
var sections = document.querySelectorAll('section[id]');
var sidebarLinks = document.querySelectorAll('.sidebar-nav a');
function updateSidebar(){
  var current = '';
  sections.forEach(function(sec){
    var top = sec.offsetTop - 200;
    if(scrollY >= top) current = sec.getAttribute('id');
  });
  sidebarLinks.forEach(function(a){
    a.classList.remove('active');
    if(a.getAttribute('data-section') === current) a.classList.add('active');
  });
}
window.addEventListener('scroll', updateSidebar);

// ============ REVEAL ON SCROLL ============
var reveals = document.querySelectorAll('.reveal');
var observer = new IntersectionObserver(function(entries){
  entries.forEach(function(e){
    if(e.isIntersecting){ e.target.classList.add('visible'); observer.unobserve(e.target); }
  });
}, {threshold: 0.1, rootMargin: '0px 0px -40px 0px'});
reveals.forEach(function(el){ observer.observe(el); });

// ============ ACCORDION ============
function toggleAccordion(header){
  var item = header.parentElement;
  var body = item.querySelector('.accordion-body');
  var wasOpen = item.classList.contains('open');
  document.querySelectorAll('.accordion-item').forEach(function(i){
    i.classList.remove('open');
    i.querySelector('.accordion-body').style.maxHeight = null;
  });
  if(!wasOpen){
    item.classList.add('open');
    body.style.maxHeight = body.scrollHeight + 'px';
  }
}

// ============ QUIZ ============
var quizSubmitted = false;
var quizScore = 0;
var quizTotal = document.querySelectorAll('.quiz-question').length;

document.querySelectorAll('.quiz-option').forEach(function(opt){
  opt.addEventListener('click', function(){
    if(quizSubmitted) return;
    var q = this.closest('.quiz-question');
    q.querySelectorAll('.quiz-option').forEach(function(o){ o.classList.remove('selected'); });
    this.classList.add('selected');
  });
});

function submitQuiz(){
  if(quizSubmitted) return;
  var questions = document.querySelectorAll('.quiz-question');
  var correct = 0;
  var allAnswered = true;
  questions.forEach(function(q){
    var sel = q.querySelector('.quiz-option.selected');
    if(!sel){ allAnswered = false; return; }
    var correctIdx = parseInt(q.dataset.correct);
    var selIdx = parseInt(sel.dataset.index);
    var fb = q.querySelector('.quiz-feedback');
    if(selIdx === correctIdx){
      correct++;
      sel.classList.add('correct');
      fb.className = 'quiz-feedback show correct';
      fb.textContent = 'Correct! Well done.';
    } else {
      sel.classList.add('incorrect');
      q.querySelectorAll('.quiz-option')[correctIdx].classList.add('correct');
      fb.className = 'quiz-feedback show incorrect';
      fb.textContent = 'Incorrect. The correct answer is highlighted.';
    }
  });
  if(!allAnswered){ alert('Please answer all questions.'); return; }
  quizSubmitted = true;
  quizScore = correct;
  var pct = Math.round((correct / quizTotal) * 100);
  var passed = pct >= 70;
  var box = document.getElementById('quizScore');
  box.innerHTML = '<div class="score">' + pct + '%</div><p style="margin:8px 0;color:' + (passed ? 'var(--accent-green)' : 'var(--accent-red)') + '">You got ' + correct + ' out of ' + quizTotal + ' correct.' + (passed ? ' You passed!' : ' You need 70% to pass.') + '</p>';
  box.classList.add('show');
  document.getElementById('submitQuiz').textContent = passed ? 'Quiz Passed!' : 'Retake Quiz';
  if(!passed){
    document.getElementById('submitQuiz').onclick = function(){ resetQuiz(); };
  }
}

function resetQuiz(){
  quizSubmitted = false;
  quizScore = 0;
  document.querySelectorAll('.quiz-option').forEach(function(o){ o.classList.remove('selected','correct','incorrect'); });
  document.querySelectorAll('.quiz-feedback').forEach(function(f){ f.className = 'quiz-feedback'; f.textContent = ''; });
  document.getElementById('quizScore').classList.remove('show');
  document.getElementById('submitQuiz').textContent = 'Submit Answers';
  document.getElementById('submitQuiz').onclick = function(){ submitQuiz(); };
}

// ============ ANIMATED COUNTERS ============
var statObserver = new IntersectionObserver(function(entries){
  entries.forEach(function(e){
    if(e.isIntersecting){
      var el = e.target;
      animateCounter(el, parseInt(el.dataset.target));
      statObserver.unobserve(el);
    }
  });
}, {threshold: 0.3});
document.querySelectorAll('.stat-number').forEach(function(el){ statObserver.observe(el); });

function animateCounter(el, target){
  var duration = 2000, start = performance.now();
  function update(now){
    var elapsed = now - start;
    var progress = Math.min(elapsed / duration, 1);
    var eased = 1 - Math.pow(1 - progress, 3);
    var current = Math.round(eased * target);
    if(target >= 1000000) el.textContent = (current / 1000000).toFixed(1) + 'M';
    else if(target >= 1000) el.textContent = current.toLocaleString();
    else if(target <= 100) el.textContent = current + '%';
    else el.textContent = current.toLocaleString();
    if(progress < 1) requestAnimationFrame(update);
  }
  requestAnimationFrame(update);
}

// ============ CERTIFICATE ============
document.getElementById('certDate').value = new Date().toLocaleDateString('en-US',{year:'numeric',month:'long',day:'numeric'});
function generateCert(){
  var name = document.getElementById('certName').value.trim();
  var msg = document.getElementById('certMessage');
  if(!name){ msg.style.display='block'; msg.style.color='var(--accent-red)'; msg.textContent='Please enter your name.'; return; }
  if(!quizSubmitted || quizScore < Math.ceil(quizTotal * 0.7)){
    msg.style.display='block'; msg.style.color='var(--accent-red)'; msg.textContent='You must pass the quiz (70%+) first.'; return;
  }
  msg.style.display='block'; msg.style.color='var(--accent-green)';
  msg.innerHTML='&#10003; Certificate generated for <strong>' + name + '</strong>!';
}

// ============ SCORM MARK COMPLETE ============
function markCourseComplete(){
  var msg = document.getElementById('scormMessage');
  if(!quizSubmitted || quizScore < Math.ceil(quizTotal * 0.7)){
    msg.style.display = 'block';
    msg.style.color = 'var(--accent-red)';
    msg.textContent = 'You must pass the quiz (70%+) before marking complete.';
    return;
  }
  // Check scroll position - must be near bottom
  var s = document.documentElement.scrollTop || document.body.scrollTop;
  var h = document.documentElement.scrollHeight - document.documentElement.clientHeight;
  var scrollPct = (s / h) * 100;
  if(scrollPct < 85){
    msg.style.display = 'block';
    msg.style.color = 'var(--accent-amber)';
    msg.textContent = 'Please scroll through all course material before marking complete.';
    return;
  }

  var passed = SCORM.complete(quizScore, quizTotal);
  msg.style.display = 'block';
  if(passed){
    msg.style.color = 'var(--accent-green)';
    msg.innerHTML = '&#10003; Course completion submitted to LMS! Status: PASSED (' + Math.round((quizScore/quizTotal)*100) + '%)';
    document.getElementById('markCompleteBtn').textContent = 'Completed!';
    document.getElementById('markCompleteBtn').disabled = true;
    document.getElementById('markCompleteBtn').style.opacity = '0.6';
    document.getElementById('moduleComplete').classList.add('show');
  } else {
    msg.style.color = 'var(--accent-red)';
    msg.textContent = 'Score submitted but you did not pass (need 70%). Please retake the quiz.';
  }
}
</script>
</body>
</html>
